{% extends "base/theme_base.html" %}

{% block page_title %}查询结果{% endblock %}

{% block single_js %}
    <script type="text/javascript" src="{{STATIC_URL}}xizhi/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}xizhi/js/secure.js"></script>
    <script type="text/javascript">
		$(document).ready(function(){
			$("#booklist").delegate("#pre, #next, #num", "click", function(){
				bookPageTurn(this, '{{type}}');
			});
			$("#booklist").delegate("#goto_page", "click", function(){
				bookPageTurn(this, '{{type}}');
			});
		});
		
		function bookPageTurn(obj, type){
			var pageIndex = "";
			if($(obj).attr("rel")==="userinput"){
				pageIndex = $("#userinput_page").val();
			}else{
				pageIndex = $(obj).attr("rel");
			}
			$.ajax({
				url: "/books/page_books/" + type, 
				data: {"page": pageIndex}, 
				type: "get", 
				async: "true", 
				success: function(data){
					if(data.status=="success"){
						$("#booklist").html(data.html);
					}else{
						alert(data.status);
					}
				}, 
				error: function(){
					alert("error");
				},
				dataType: "json"
			});
		}
	</script>
{% endblock %}

{% block style_css %}
<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}base/css/main.css" />
{% endblock %}
		
{% block body_base %}
		{% if not pageItems %}
		查无此书
		{% endif %}
		<div class="books-all" id="booklist">
			{% include "books/includes/resultlist.html" %}
		</div>
{% endblock %}	
	
